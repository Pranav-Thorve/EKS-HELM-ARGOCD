<!DOCTYPE html>
<html>
<head>
  <title>AcmeSite</title>
  <style>
    table { border-collapse: collapse; width: 100%; margin-top: 20px; }
    th, td { border: 1px solid #ccc; padding: 8px; }
    th { background: #eee; }
  </style>
</head>

<body>
  <h2>AcmeSite</h2>

  <input id="todoId" type="number" value="1" />
  <button onclick="fetchData()">Fetch Data</button>
  <button onclick="showData()">Show Data</button>

  <pre id="result"></pre>

  <table>
    <thead>
      <tr>
        <th>ID</th>
        <th>User</th>
        <th>Title</th>
        <th>Completed</th>
      </tr>
    </thead>
    <tbody id="tableBody"></tbody>
  </table>

<script>
async function fetchData() {
  const id = document.getElementById("todoId").value;
  const r = await fetch(`/api/health/${id}`);
  const data = await r.json();
  document.getElementById("result").textContent =
    JSON.stringify(data, null, 2);
}

async function showData() {
  const r = await fetch("/api/todos");
  const data = await r.json();

  const tbody = document.getElementById("tableBody");
  tbody.innerHTML = "";

  data.forEach(row => {
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${row.id}</td>
      <td>${row.user_id}</td>
      <td>${row.title}</td>
      <td>${row.completed}</td>
    `;
    tbody.appendChild(tr);
  });
}
</script>
</body>
</html>
